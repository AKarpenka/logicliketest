generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String @id @default(cuid())
  user_ip    String @unique
  countVotes Int    @default(0)
  votes      Vote[]

  @@map("users")
}

model ProjectIdea {
  id          String @id @default(cuid())
  title       String
  description String
  votes       Int    @default(0)
  votesRel    Vote[]

  @@map("project_ideas")
}

model Vote {
  id            String @id @default(cuid())
  userId        String
  projectIdeaId String
  user          User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  projectIdea   ProjectIdea @relation(fields: [projectIdeaId], references: [id], onDelete: Cascade)

  @@unique([userId, projectIdeaId])
  @@index([userId])
  @@index([projectIdeaId])
  @@map("votes")
}
